<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ§  BrainRot Admin</title>
<style>
body{font-family:'Poppins',sans-serif;background:radial-gradient(circle at top left,#000428,#004e92);color:white;margin:0;padding:20px;text-align:center;}
h1{font-family:'Orbitron',sans-serif;font-size:3em;margin-top:20px;text-shadow:0 0 20px #00c6ff;}
.box{background:rgba(255,255,255,0.1);padding:20px;border-radius:20px;margin:20px auto;max-width:700px; text-align:center;box-shadow:0 0 40px rgba(0,198,255,0.3);}
button{margin:5px;padding:10px 18px;border:none;border-radius:10px;background:linear-gradient(90deg,#00c6ff,#0072ff);color:white;font-weight:600;cursor:pointer;}
button:hover{transform:scale(1.05);}
.trade-list{margin-top:20px;text-align:left;background:rgba(255,255,255,0.05);padding:15px;border-radius:10px;max-height:500px;overflow-y:auto;}
.trade-item{border-bottom:1px solid rgba(255,255,255,0.2);padding:10px 0;}
.trade-item:last-child{border:none;}
</style>
</head>
<body>
<h1>ðŸ§  BrainRot Admin</h1>
<div class="box">
<h2>ðŸ“© Eingegangene Trade-Anfragen</h2>
<div id="tradeList" class="trade-list">ðŸ”„ Lade Anfragen...</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig = {
apiKey:"AIzaSyC1kLr0wdCM1HDWj8x7LvMV2Q0K6kzycUY",
authDomain:"brainrottradingseite.firebaseapp.com",
projectId:"brainrottradingseite",
storageBucket:"brainrottradingseite.firebasestorage.app",
messagingSenderId:"212738351089",
appId:"1:212738351089:web:9ae5b737cf550554d16e50",
measurementId:"G-BNZ0Y47M0K",
databaseURL:"https://brainrottradingseite-default-rtdb.europe-west1.firebasedatabase.app/"
};
const app=initializeApp(firebaseConfig);
const db=getDatabase(app);

const tradeList=document.getElementById("tradeList");
const tradesRef=ref(db,"trades");

onValue(tradesRef, snapshot=>{
  const trades=snapshot.val();
  tradeList.innerHTML="";
  if(!trades){ tradeList.innerHTML="ðŸ˜´ Keine Anfragen"; return;}
  
  Object.entries(trades).forEach(([key,t])=>{
    const div=document.createElement("div");
    div.className="trade-item";
    div.innerHTML=`
      <p>ðŸ§  Brainrot-ID: ${t.brainrotId || t.tradeId}</p>
      <p>ðŸ‘¤ Roblox-Name: ${t.robloxName}</p>
      <p>ðŸ“¨ Angebot: ${t.offer || "â€”"}</p>
      <p>âœ… Status: ${t.accepted ? "Akzeptiert" : "Offen"}</p>
    `;
    
    if(!t.accepted){
      const acceptBtn=document.createElement("button");
      acceptBtn.textContent="Annehmen";
      acceptBtn.onclick=()=>set(ref(db,"trades/"+key+"/accepted"),true);
      div.appendChild(acceptBtn);
    }
    
    if(t.accepted){
      const chatBtn=document.createElement("button");
      chatBtn.textContent="Chat starten";
      chatBtn.onclick=()=>window.open(`index.html`);
      div.appendChild(chatBtn);
    }
    
    tradeList.appendChild(div);
  });
});
</script>
</body>
</html>